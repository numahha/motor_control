# 比例フィードバック制御（Cのみ・負荷有り・重力によるトルクを無視できる系）

目標角度との誤差に基づくフィードバック制御を行う（プログラム実行開始時の角度を原点とする）。
主な目的は、「閉ループ系プログラムの一番簡単な例を作って示すこと」である。

負荷有りでやった理由は、
* 負荷無しだと軸の回転が見え辛かった。
* ステップ／周波数応答を眺めて、想定外の動作時の危険が負荷無しと同程度だろうと思った。


## 設計

### 飽和機能
この重りを取り付けたシステムは、ステップ応答試験では電流0.23A（指令電圧2.3V）程度で最大回転速度に到達する。
これに基づき、（余裕を見込んで）電流の大きさの最大値が0.2A（指令電圧2V）となるように制御器に制限を与える。

~~もし仮にモータ配線の正負を逆に間違えて発散する方向にフィードバックをかけたとしても、指令電圧2Vのステップ応答に収束するだけである。~~


### 比例ゲイン
「指令電圧の飽和値が2V」と「１回転が2πrad（360°）」から考える。
目標値との誤差が1πrad（180°）である場合に指令電圧が飽和するように設定すると、比例ゲインは1×(2/π)である（単位はV/rad）。これをベースにして、「1×(2/π)、2×(2/π)、3×(2/π)、4×(2/π)、5×(2/π)」の5通りについて調べる。

### 目標値
`REF_ANGLE`を変える。

## 試運転の感想
* 摩擦が大きいので、そこそこ定常偏差が残る。
